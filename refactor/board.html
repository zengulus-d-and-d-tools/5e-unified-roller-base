<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ravnica Investigation Board</title>
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/board.css">
    <meta name="theme-color" content="#1e1e1e">
</head>

<body>
    <canvas id="vector-cloud"></canvas>

    <!-- Canvas for drawing physics strings -->
    <canvas id="connection-layer"></canvas>

    <div class="header-overlay">
        <a href="tools.html" class="back-link">&larr; Portal</a>
        <div class="board-title">CASE FILE: <span id="caseName" contenteditable="true">UNNAMED</span></div>
        <div class="board-controls">
            <div
                style="font-size:0.7rem; color:#666; display:flex; flex-direction:column; text-align:right; margin-right:10px;">
                <span>Double-Click BG to Reset Focus</span>
                <span>Click String to Add Note</span>
            </div>
            <button class="btn-tool" onclick="saveBoard()">ğŸ’¾ Save</button>
            <button class="btn-tool" onclick="exportBoard()">ğŸ“¤ Export</button>
            <button class="btn-tool" onclick="importBoard()">ğŸ“¥ Import</button>
            <button class="btn-tool" onclick="clearBoard()">ğŸ—‘ï¸ Clear</button>
        </div>
    </div>

    <!-- Container for the dragged nodes -->
    <div id="board-container"></div>

    <!-- Container for string labels (separate to sit on top of canvas but below focused nodes) -->
    <div id="string-label-container"></div>

    <div class="toolbar-scroll-wrapper">
        <div class="toolbar">
            <!-- CORE TYPES -->
            <div class="tool-group">
                <div class="tool-item" draggable="true" ondragstart="startDragNew(event, 'person')">
                    <div class="icon">ğŸ‘¤</div>
                    <div class="label">Person</div>
                </div>
                <div class="tool-item" draggable="true" ondragstart="startDragNew(event, 'location')">
                    <div class="icon">ğŸ“</div>
                    <div class="label">Location</div>
                </div>
                <div class="tool-item" draggable="true" ondragstart="startDragNew(event, 'clue')">
                    <div class="icon">ğŸ”</div>
                    <div class="label">Clue</div>
                </div>
                <div class="tool-item" draggable="true" ondragstart="startDragNew(event, 'note')">
                    <div class="icon">ğŸ“</div>
                    <div class="label">Note</div>
                </div>
            </div>

            <div class="divider"></div>

            <!-- GUILDS -->
            <div class="tool-group">
                <div class="tool-item g-azorius" draggable="true" ondragstart="startDragNew(event, 'azorius')">
                    <div class="icon">âš–ï¸</div>
                    <div class="label">Azorius</div>
                </div>
                <div class="tool-item g-boros" draggable="true" ondragstart="startDragNew(event, 'boros')">
                    <div class="icon">âš”ï¸</div>
                    <div class="label">Boros</div>
                </div>
                <div class="tool-item g-dimir" draggable="true" ondragstart="startDragNew(event, 'dimir')">
                    <div class="icon">ğŸ‘ï¸</div>
                    <div class="label">Dimir</div>
                </div>
                <div class="tool-item g-golgari" draggable="true" ondragstart="startDragNew(event, 'golgari')">
                    <div class="icon">ğŸ„</div>
                    <div class="label">Golgari</div>
                </div>
                <div class="tool-item g-gruul" draggable="true" ondragstart="startDragNew(event, 'gruul')">
                    <div class="icon">ğŸ”¥</div>
                    <div class="label">Gruul</div>
                </div>
                <div class="tool-item g-izzet" draggable="true" ondragstart="startDragNew(event, 'izzet')">
                    <div class="icon">âš¡</div>
                    <div class="label">Izzet</div>
                </div>
                <div class="tool-item g-orzhov" draggable="true" ondragstart="startDragNew(event, 'orzhov')">
                    <div class="icon">ğŸ’°</div>
                    <div class="label">Orzhov</div>
                </div>
                <div class="tool-item g-rakdos" draggable="true" ondragstart="startDragNew(event, 'rakdos')">
                    <div class="icon">ğŸª</div>
                    <div class="label">Rakdos</div>
                </div>
                <div class="tool-item g-selesnya" draggable="true" ondragstart="startDragNew(event, 'selesnya')">
                    <div class="icon">ğŸŒ³</div>
                    <div class="label">Selesnya</div>
                </div>
                <div class="tool-item g-simic" draggable="true" ondragstart="startDragNew(event, 'simic')">
                    <div class="icon">ğŸ§¬</div>
                    <div class="label">Simic</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu (Simplified, mostly replaced by direct interaction) -->
    <div id="context-menu" class="context-menu">
        <div class="menu-item delete" onclick="deleteTargetNode()">ğŸ—‘ï¸ Delete Node</div>
    </div>

    <script src="js/vector-field.js"></script>
    <script src="js/board.js"></script>
</body>

</html>