<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ravnica Task Force: GM Screen v3</title>
    <meta name="theme-color" content="#1e1e1e">

    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/dm-screen.css">

</head>

<body>
    <canvas id="vector-cloud"></canvas>

    <header class="hero-header" style="max-width: 1100px; width: 100%; margin: 0 auto 24px;">
        <div>
            <p class="hero-eyebrow">Ravnica Task Force</p>
            <h1>Narrative Engine</h1>
            <p class="hero-subtitle">A procedural improvisation console for incident prompts, sensory texture, hazards, and fallout beats.</p>
        </div>
        <div class="hero-actions">
            <div class="hero-action-bar primary">
                <a class="hero-btn ghost" href="tools.html">Portal</a>
            </div>
            <div class="hero-action-bar secondary">
                <button class="hero-btn ghost" onclick="triggerAccentPicker()">ğŸ¨ Accent</button>
                <button class="hero-btn ghost" id="btn-bg-style" onclick="cycleBgStyle()">ğŸŒŒ BG: Field</button>
            </div>
            <input type="color" id="accent-picker-input"
                style="position:absolute; opacity:0; pointer-events:none;" onchange="setAccentColor(this.value)">
        </div>
    </header>

    <div class="container">

        <div class="card">
            <div class="section-title" style="cursor: default;">The Street (Moment-to-Moment)</div>
            <button class="btn-gen" onclick="genStreetScene()">Generate Incident</button>
            <div class="output-box" id="out-street">
                <div class="dispatch-grid" id="dispatch-content">
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-title" style="cursor: default;">Scene Texture (Combinatoric)</div>
            <div class="grid-2-tight" style="margin-bottom:6px;">
                <button class="btn-small" onclick="genTexture('struct')">ğŸ§± Structure</button>
                <button class="btn-small" onclick="genTexture('guts')">âš™ï¸ Infrastructure</button>
            </div>
            <div class="grid-2-tight">
                <button class="btn-small" onclick="genTexture('debris')">ğŸ¥¡ Debris</button>
                <button class="btn-small" onclick="genTexture('atmos')">ğŸ’¡ Atmosphere</button>
            </div>
            <div class="output-box" id="out-texture">
                <div class="texture-out" id="texture-content"></div>
            </div>
        </div>

        <div class="card">
            <div class="section-title" style="cursor: default;">NPC Improvisation</div>
            <button class="btn-small" onclick="genNPC()">ğŸ‘¤ Generate NPC Want/Leverage</button>
            <div class="output-box" id="out-npc">
                <div class="text-output" id="npc-content"></div>
            </div>
        </div>

        <div class="card">
            <div class="section-title" onclick="toggleRef('clue-ref')">
                <span>ğŸ” Clue Signatures (Quick Ref)</span>
                <span>â–¼</span>
            </div>
            <div class="accordion-content" id="clue-ref">
                <table class="ref-table">
                    <thead>
                        <tr>
                            <th>Guild</th>
                            <th>Signatures (Phys / Soc / Arc)</th>
                        </tr>
                    </thead>
                    <tbody id="clue-table-body"></tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <div class="section-title" style="cursor: default;">Friction & Hazards</div>
            <div class="grid-2">
                <button class="btn-small" style="color:var(--danger); border-color: rgba(255, 107, 107, 0.3);"
                    onclick="genHazard()">âš ï¸
                    Hazard (2d6)</button>
                <button class="btn-small" style="color:var(--gold); border-color: rgba(241, 196, 15, 0.3);"
                    onclick="genSnag()">ğŸš§ Snag
                    (2d20)</button>
            </div>
            <div class="output-box" id="out-hazard">
                <div class="text-output" id="hazard-content"></div>
            </div>
        </div>

        <div class="card">
            <div class="section-title" style="cursor: default;">Debrief Phase</div>
            <button class="btn-small" onclick="genBroadsheet()">ğŸ“° Generate Broadsheet Headline</button>
            <div class="output-box" id="out-paper">
                <div class="text-output" id="paper-content"></div>
            </div>
        </div>

        <div class="card">
            <div class="section-title" onclick="toggleRef('guild-ref')">
                <span>ğŸ¦ Guild Jurisdictions</span>
                <span>â–¼</span>
            </div>
            <div class="accordion-content" id="guild-ref">
                <table class="ref-table">
                    <thead>
                        <tr>
                            <th>Guild</th>
                            <th>Jurisdiction</th>
                            <th>Liaison Perk</th>
                        </tr>
                    </thead>
                    <tbody id="guild-table-body"></tbody>
                </table>
            </div>
        </div>

    </div>
    <script src="js/data.js"></script>
    <script src="js/dm-screen.js"></script>
    <script src="js/vector-field.js"></script>
</body>

</html>
