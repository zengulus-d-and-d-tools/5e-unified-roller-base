<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <title>Ravnica Task Force: GM Screen v3</title>
    <meta name="theme-color" content="#1e1e1e">

    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/dm-screen.css">

</head>

<body>
    <canvas id="vector-cloud"></canvas>

    <header class="hero-header">
        <div>
            <p class="hero-eyebrow">Ravnica Task Force</p>
            <h1>Narrative Engine</h1>
            <p class="hero-subtitle">A procedural improvisation console for incident prompts, sensory texture, hazards, and fallout beats.</p>
        </div>
        <div class="hero-actions">
            <div class="hero-action-bar primary">
                <a class="hero-btn ghost" href="tools.html">Portal</a>
            </div>
            <div class="hero-action-bar secondary">
                <button class="hero-btn ghost" data-onclick="triggerAccentPicker()">ğŸ¨ Accent</button>
                <button class="hero-btn ghost" id="btn-bg-style" data-onclick="cycleBgStyle()">ğŸŒŒ BG: Field</button>
            </div>
            <input type="color" id="accent-picker-input"
                class="dm-accent-picker-input" data-onchange="setAccentColor(this.value)">
        </div>
    </header>

    <div class="container">

        <div class="card">
            <div class="section-title dm-section-static">The Street (Moment-to-Moment)</div>
            <button class="btn-gen" data-onclick="genStreetScene()">Generate Incident</button>
            <div class="output-box" id="out-street">
                <div class="dispatch-grid" id="dispatch-content">
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-title dm-section-static">Scene Texture (Combinatoric)</div>
            <div class="grid-2-tight dm-texture-row-top">
                <button class="btn-small" data-onclick="genTexture('struct')">ğŸ§± Structure</button>
                <button class="btn-small" data-onclick="genTexture('guts')">âš™ï¸ Infrastructure</button>
            </div>
            <div class="grid-2-tight">
                <button class="btn-small" data-onclick="genTexture('debris')">ğŸ¥¡ Debris</button>
                <button class="btn-small" data-onclick="genTexture('atmos')">ğŸ’¡ Atmosphere</button>
            </div>
            <div class="output-box" id="out-texture">
                <div class="texture-out" id="texture-content"></div>
            </div>
        </div>

        <div class="card">
            <div class="section-title dm-section-static">NPC Improvisation</div>
            <button class="btn-small" data-onclick="genNPC()">ğŸ‘¤ Generate NPC Want/Leverage</button>
            <div class="output-box" id="out-npc">
                <div class="text-output" id="npc-content"></div>
            </div>
        </div>

        <div class="card">
            <div class="section-title" data-onclick="toggleRef('clue-ref')">
                <span>ğŸ” Clue Signatures (Quick Ref)</span>
                <span>â–¼</span>
            </div>
            <div class="accordion-content" id="clue-ref">
                <table class="ref-table">
                    <thead>
                        <tr>
                            <th>Guild</th>
                            <th>Signatures (Phys / Soc / Arc)</th>
                        </tr>
                    </thead>
                    <tbody id="clue-table-body"></tbody>
                </table>
            </div>
        </div>

        <div class="card">
            <div class="section-title dm-section-static">Friction & Hazards</div>
            <div class="grid-2">
                <button class="btn-small dm-btn-hazard" data-onclick="genHazard()">âš ï¸
                    Hazard (2d6)</button>
                <button class="btn-small dm-btn-snag" data-onclick="genSnag()">ğŸš§ Snag
                    (2d20)</button>
            </div>
            <div class="output-box" id="out-hazard">
                <div class="text-output" id="hazard-content"></div>
            </div>
        </div>

        <div class="card">
            <div class="section-title dm-section-static">Debrief Phase</div>
            <button class="btn-small" data-onclick="genBroadsheet()">ğŸ“° Generate Broadsheet Headline</button>
            <div class="output-box" id="out-paper">
                <div class="text-output" id="paper-content"></div>
            </div>
        </div>

        <div class="card">
            <div class="section-title" data-onclick="toggleRef('guild-ref')">
                <span>ğŸ¦ Guild Jurisdictions</span>
                <span>â–¼</span>
            </div>
            <div class="accordion-content" id="guild-ref">
                <table class="ref-table">
                    <thead>
                        <tr>
                            <th>Guild</th>
                            <th>Jurisdiction</th>
                            <th>Liaison Perk</th>
                        </tr>
                    </thead>
                    <tbody id="guild-table-body"></tbody>
                </table>
            </div>
        </div>

    </div>
    <script src="js/delegated-handler.js"></script>
    <script src="js/sw-register.js"></script>
    <script src="js/data-guilds.js"></script>
    <script src="js/data-setting.js"></script>
    <script src="js/data.js"></script>
    <script src="js/dm-screen.js"></script>
    <script src="js/vector-field.js"></script>
</body>

</html>
